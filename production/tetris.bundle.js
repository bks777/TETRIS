!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e,this._on()}return o(t,[{key:"_on",value:function(){var t=this;game.EventManager.subscribe("KEY_PRESSED_DOWN",function(e){t._userActions(e,!0)}),game.EventManager.subscribe("KEY_PRESSED_UP",function(e){t._userActions(e,!1)}),game.EventManager.subscribe("AnimationControls.ADD_TETROMINO",function(){t.view.checkTetraminoAdding()}),game.EventManager.subscribe("AnimationControls.UPDATE_SCORE",function(){t.view.informers.updateScore=!1})}},{key:"_userActions",value:function(t,e){this[t._data+"ActionCheck"](e)}},{key:"leftActionCheck",value:function(){this.view.animationsControls.moveLeft()}},{key:"rightActionCheck",value:function(){this.view.animationsControls.moveRight()}},{key:"downActionCheck",value:function(t){this.view.animationsControls.moveDelay=t}},{key:"rotateActionCheck",value:function(){this.view.animationsControls.rotateTetromino()}},{key:"startNewRound",value:function(){this.view.startNewRound()}}]),t}();e.default=i},function(t){t.exports=[{mtrx:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"cyan"},{mtrx:[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],color:"blue"},{mtrx:[[0,1,1,0],[0,0,1,0],[0,0,1,0],[0,0,0,0]],color:"orange"},{mtrx:[[0,1,1,0],[0,1,1,0],[0,0,0,0]],color:"yellow"},{mtrx:[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]],color:"green"},{mtrx:[[0,1,0],[1,1,1],[0,0,0]],color:"violet"},{mtrx:[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],color:"pink"}]},function(t){t.exports={back_position:{x:494,y:0},tetro_position:{x:805,y:-93},cell:{width:31,height:31},rowsNumber:23,colsNumber:10,moveDelay:40,states:["play","remove","game_over"],tetro_pull_length:3,next_position:{x:1240,y:160,offsets_y:[0,140,276]},score:{x:620,y:330,style:{fontFamily:"Arial",fontSize:40,fill:"0x000000",align:"center",fontWeight:"bold"}},end_round:{x:805,y:0,back:{width:310,height:620,color:"0x000000",alpha:.7},button:{x:31,y:312,text:"PLAY AGAIN",style:{fontFamily:"Arial",fontSize:32,fill:"0x000000",align:"center",fontWeight:"bold"},text_offsets:{x:29,y:12}},label:{x:34,y:250,text:"GAME OVER",style:{fontFamily:"Arial",fontSize:39,fill:"0x35bb8b",align:"center",fontWeight:"bold"}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(t){function e(t,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.config=t,r._callback=i,r.button=null,r._initElements(n),r.position.set(t.x,t.y),o.addChild(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,PIXI.Container),o(e,[{key:"_initElements",value:function(t){var e=new PIXI.Graphics,n=new PIXI.Sprite(t),o=new PIXI.Text(this.config.label.text,this.config.label.style),i=new PIXI.Text(this.config.button.text,this.config.button.style);o.position.set(this.config.label.x,this.config.label.y),e.beginFill(this.config.back.color),e.drawRect(0,0,this.config.back.width,this.config.back.height),e.alpha=this.config.back.alpha,i.position.set(this.config.button.text_offsets.x,this.config.button.text_offsets.y),n.addChild(i),n.position.set(this.config.button.x,this.config.button.y),n.mouseup=this._callback,this.button=n,this.addChild(e,o,n)}},{key:"show",value:function(){this.button.interactive=this.button.buttonMode=!0,this.visible=!0}},{key:"hide",value:function(){this.button.interactive=this.button.buttonMode=!1,this.visible=!1}}]),e}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this.respack=e.respack,this.config=e.config,this._score=0,this.nextContainer=new PIXI.Container,this.scoreContainer=new PIXI.Container,this._scoreText=null,this._tempTetraminos=[],this._initNextData(),this._initScoreField()}return o(t,[{key:"_initNextData",value:function(){var t=this._data.tetro_pull,e=this.config.next_position;this.nextContainer.position.set(e.x,e.y),this.updateNextTetrominos=t,this._data.parent.addChild(this.nextContainer)}},{key:"_initScoreField",value:function(){this._scoreText=new PIXI.Text(""+this._score,this.config.score.style),this.scoreContainer.addChild(this._scoreText),this._scoreText.anchor.set(.5,.5),this.scoreContainer.position.set(this.config.score.x,this.config.score.y),this._data.parent.addChild(this.scoreContainer)}},{key:"_generateTetrominos",value:function(t){var e=this;this._tempTetraminos.length>0&&(this._tempTetraminos.forEach(function(t){t.parent.removeChild(t)}),this._tempTetraminos.length=0);for(var n=function(n){var o=t[n].config,i=void 0,r=new PIXI.Sprite(PIXI.Texture.EMPTY);o.mtrx.forEach(function(t,n){t.forEach(function(t,a){1===t&&((i=new PIXI.Sprite(e.respack[["block_"+o.color]])).x=a*e.config.cell.width,i.y=n*e.config.cell.height,r.addChild(i))})}),e.nextContainer.addChild(r),r.y=e.config.next_position.offsets_y[n],"violet"===o.color&&(r.x+=e.config.cell.width/2),e._tempTetraminos.push(r)},o=0;o<t.length;o++)n(o)}},{key:"updateNextTetrominos",set:function(t){this._generateTetrominos(t)}},{key:"updateScore",set:function(t){t?this._score=0:this._score+=10,this._scoreText.text=""+this._score}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._currentState=null,this.legalStates=e}return o(t,[{key:"currentState",get:function(){return this._currentState},set:function(t){if(-1===this.legalStates.indexOf(t))throw new Error("game state ["+t+"] is not legal!");this._currentState=t,console.info("state setted to ["+t+"]")}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(5));var r=function(){function t(e,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateController=new i.default(e.states),this.stateController.currentState="play",this.config=e,this._cells=n.cells,this._tetroPull=[],this.currentPositionX=0,this.currentPositionY=0,this.currentTime=0,this._movingShape=null,this._moveDelay=e.moveDelay,this.isGameOver=!1,game._ticker.add(function(){o.tick()})}return o(t,[{key:"tick",value:function(){switch(this.currentTime++,this.stateController.currentState){case"play":this._renderPlay();break;case"remove":this._renderLineRemove()}}},{key:"_renderPlay",value:function(){var t=this;if(this.movingTetromino||(this.movingTetromino=this.tetrominoFromPull,this.currentPositionX=this.config.colsNumber/2-this.movingTetromino.localPositionX-Math.round(this.movingTetromino.width/2),this.currentPositionY=0,this.movingTetromino.blocks.forEach(function(t){t.visible=!0}),game.EventManager.dispatch("AnimationControls.ADD_TETROMINO")),this.isGameOver)this.stateController.currentState="game_over";else{var e=this.movingTetromino.render(this.currentPositionX,this.currentPositionY,this.config.cell);if(this.currentTime>=this.moveDelay)this._canMoveVertically(this.currentPositionY+1)?this.currentPositionY++:(e.forEach(function(e){var n=e.x,o=e.y;t._cells[o][n].addBlock(t.movingTetromino.getBlock())}),this._checkForLineBurn(),this.movingTetromino=null),this.currentTime=0}}},{key:"_renderLineRemove",value:function(){var t=this;this._getLinesToRemove().forEach(function(e){var n;t._cells[e].forEach(function(t){t.clear()});var o=t._cells.splice(e,1);(n=t._cells).unshift.apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(o)),t._cells.forEach(function(t,n){n<=e&&t.forEach(function(t){t.isEmpty||t.moveDown()})}),game.EventManager.dispatch("AnimationControls.UPDATE_SCORE")}),this.stateController.currentState="play"}},{key:"_checkForLineBurn",value:function(){return this._getLinesToRemove().length>0&&(this.stateController.currentState="remove",!0)}},{key:"_getLinesToRemove",value:function(){for(var t=[],e=0;e<this._cells.length;e++){for(var n=!0,o=0;o<this._cells[e].length;o++)this._cells[e][o].isEmpty&&(n=!1);n&&t.push(e)}return t}},{key:"rotateTetromino",value:function(){if(this.movingTetromino){var t={posX:this.currentPositionX,posY:this.currentPositionY,cells:this._cells,totalCols:this.config.colsNumber,totalRows:this.config.rowsNumber};this.movingTetromino.rotate(t)}}},{key:"moveLeft",value:function(){this.movingTetromino&&(this.currentPositionY+this.movingTetromino.height<=3||(this.currentPositionX=this._canMoveHorizontally(this.currentPositionX-1)?this.currentPositionX-1:this.currentPositionX))}},{key:"moveRight",value:function(){this.movingTetromino&&(this.currentPositionY+this.movingTetromino.height<=3||(this.currentPositionX=this._canMoveHorizontally(this.currentPositionX+1)?this.currentPositionX+1:this.currentPositionX))}},{key:"_canMoveVertically",value:function(t){for(var e=0;e<this.movingTetromino.blocksData.length;e++)for(var n=0;n<this.movingTetromino.blocksData[e].length;n++)if(0!==this.movingTetromino.blocksData[e][n]){var o=this.currentPositionX+n,i=t+e;if(i>=this.config.rowsNumber)return!1;if(!this._cells[i][o]||!this._cells[i][o].isEmpty)return!1}return!0}},{key:"_canMoveHorizontally",value:function(t){for(var e=0;e<this.movingTetromino.blocksData.length;e++)for(var n=0;n<this.movingTetromino.blocksData[e].length;n++)if(0!==this.movingTetromino.blocksData[e][n]){var o=t+n,i=this.currentPositionY+e;if(o<0||o>=this.config.colsNumber)return!1;if(!this._cells[i][o]||!this._cells[i][o].isEmpty)return!1}return!0}},{key:"_checkEndRound",value:function(){return this.currentPositionY<3&&!this._canMoveVertically(this.currentPositionY)}},{key:"startNewRound",value:function(){this.isGameOver=!1,this.currentTime=0,this.movingTetromino=null,this.stateController.currentState="play"}},{key:"moveDelay",get:function(){return this._moveDelay},set:function(t){this._moveDelay=t?this.config.moveDelay/30:this.config.moveDelay}},{key:"tetrominoFromPull",get:function(){return this._tetroPull[0]}},{key:"movingTetromino",get:function(){return this._movingShape},set:function(t){this._movingShape=t}},{key:"isEndRound",get:function(){return this.isGameOver=this._checkEndRound(),this.isGameOver}},{key:"tetrominos_pull",get:function(){return this._tetroPull}},{key:"tetrominoToPull",set:function(t){this._tetroPull.push(t),this._tetroPull.length>this.config.tetro_pull_length&&this._tetroPull.shift()}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sprite=null}return o(t,[{key:"addBlock",value:function(t){this.sprite=t}},{key:"clear",value:function(){this.sprite.parent.removeChild(this.sprite),this.sprite=null}},{key:"moveDown",value:function(){this.sprite.y+=this.sprite.height}},{key:"isEmpty",get:function(){return null===this.sprite}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.config=o,this.blocksData=o.mtrx,this.blocks=[],this.container=n,this._initElements(e)}return o(t,[{key:"_initElements",value:function(t){for(var e=void 0,n=0;n<this.blocksData.length;n++)for(var o=0;o<this.blocksData[n].length;o++)this.blocksData[n][o]>0&&((e=new PIXI.Sprite(t["block_"+this.config.color])).visible=!1,this.blocks.push(this.container.addChild(e)))}},{key:"getBlock",value:function(){return this.blocks.shift()}},{key:"rotate",value:function(e){var n=e.posX,o=e.posY,i=e.cells,r=e.totalCols,a=e.totalRows;if(!(o+this.height<=3)){for(var s=[],l=0;l<this.blocksData.length;l++){s[l]=[];for(var c=0;c<this.blocksData[l].length;c++)s[l][c]=this.blocksData[l][c]}for(var u=s.length,f=0;f<u/2;f++)for(var h=f;h<u-f-1;h++){var d=s[f][h];s[f][h]=s[h][u-1-f],s[h][u-1-f]=s[u-1-f][u-1-h],s[u-1-f][u-1-h]=s[u-1-h][f],s[u-1-h][f]=d}t._canRotate(n,o,i,r,a,s)&&(this.blocksData=s)}}},{key:"render",value:function(t,e,n){for(var o=[],i=0,r=0;r<this.blocksData.length;r++)for(var a=0;a<this.blocksData[r].length;a++)if(this.blocksData[r][a]>0){var s=this.blocks[i],l=t+a,c=e+r;s.x=l*n.width,s.y=c*n.height,s.width=n.width,s.height=n.height,o.push({x:l,y:c}),i++}return o}},{key:"height",get:function(){var t=0;return this.blocksData.forEach(function(e){for(var n=0;n<e.length;n++)if(e[n]>0){t++;break}}),t}},{key:"width",get:function(){var t=0;return this.blocksData.forEach(function(e){for(var n=0,o=0;o<e.length;o++)e[o]>0&&n++;t=Math.max(t,n)}),t}},{key:"localPositionX",get:function(){var t=this.blocksData[0].length;return this.blocksData.forEach(function(e){-1!==e.indexOf(1)&&(t=Math.min(e.indexOf(1),t))}),t}}],[{key:"_canRotate",value:function(t,e,n,o,i,r){for(var a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)if(0!==r[a][s]){var l=t+s,c=e+a;if(l<0||l>o||c>=i)return!1;if(!n[c][l]||!n[c][l].isEmpty)return!1}return!0}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=f(n(8)),r=f(n(7)),a=f(n(6)),s=f(n(4)),l=f(n(3)),c=f(n(2)),u=f(n(1));function f(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.addChild(o),o.respack=t,o.cells=[],o.tetro_data=u.default,o.tetro_container=null,o.animationsControls=null,o.endRound=null,o.informers=null,o._initElements(),o._initField(),o._initAnimationsControls(),o._initTetrominos(),o._initInformers(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,PIXI.Container),o(e,[{key:"_initElements",value:function(){var t=this,e=new PIXI.Sprite(this.respack.field_back);e.position.set(c.default.back_position.x,c.default.back_position.y),this.addChild(e),this.tetro_container=new PIXI.Container,this.addChild(this.tetro_container),this.tetro_container.position.set(c.default.tetro_position.x,c.default.tetro_position.y),this.endRound=new l.default(c.default.end_round,this.respack.end_button,this,function(){t.startNewRound()}),this.endRound.hide()}},{key:"_initField",value:function(){for(var t=0;t<c.default.rowsNumber;t++){this.cells[t]=[];for(var e=0;e<c.default.colsNumber;e++)this.cells[t][e]=new r.default}}},{key:"_initAnimationsControls",value:function(){var t={states:c.default.states,rowsNumber:c.default.rowsNumber,colsNumber:c.default.colsNumber,moveDelay:c.default.moveDelay,tetro_pull_length:c.default.tetro_pull_length,cell:c.default.cell},e={cells:this.cells};this.animationsControls=new a.default(t,e)}},{key:"_initTetrominos",value:function(){for(var t=0;t<c.default.tetro_pull_length;t++)this.animationsControls.tetrominoToPull=this.getRandomTetromino()}},{key:"_initInformers",value:function(){var t={tetro_pull:this.animationsControls.tetrominos_pull,config:c.default,parent:this,respack:this.respack};this.informers=new s.default(t)}},{key:"getRandomTetromino",value:function(){return new i.default(this.respack,this.tetro_container,this.tetro_data[Math.round(Math.random()*(this.tetro_data.length-1))])}},{key:"checkTetraminoAdding",value:function(){this.animationsControls.isEndRound?this.endRound.show():(this.animationsControls.tetrominoToPull=this.getRandomTetromino(),this.informers.updateNextTetrominos=this.animationsControls.tetrominos_pull)}},{key:"startNewRound",value:function(){this.cells.forEach(function(t){t.forEach(function(t){t.isEmpty||t.clear()})}),this._initTetrominos(),this.informers.updateScore=!0,this.informers.updateNextTetrominos=this.animationsControls.tetrominos_pull,this.animationsControls.startNewRound(),this.endRound.hide()}}]),e}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(9)),i=r(n(0));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=new o.default(e,n),this.controller=new i.default(this.view)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._addKeyboardListener()}return o(t,[{key:"_addKeyboardListener",value:function(){document.addEventListener("keydown",function(t){var e={37:"left",39:"right",40:"down",32:"down",38:"rotate"};void 0!==e[t.keyCode]&&game.EventManager.dispatch("KEY_PRESSED_DOWN",e[t.keyCode])}),document.addEventListener("keyup",function(t){var e={40:"down",32:"down"};void 0!==e[t.keyCode]&&game.EventManager.dispatch("KEY_PRESSED_UP",e[t.keyCode])})}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,n,o){i(this,t),this._name=e,this._data=n}return o(t,[{key:"name",get:function(){return this._name}},{key:"data",get:function(){return this._data}}]),t}(),a=function(){function t(){i(this,t),this._listeners={},Object.seal(this)}return o(t,[{key:"dispatch",value:function(t,e,n){var o=this._listeners[t];if(o){for(var i=new r(t,e,n),a=0;a<o.length;){var s=o[a];s.cb(i),s.once?o.splice(a,1):++a}i.locked||n&&n()}else n&&n()}},{key:"subscribe",value:function(t,e){this._addListener(t,new function(t,e){this.cb=t,this.once=e||!1}(e))}},{key:"_addListener",value:function(t,e){this._listeners[t]?this._listeners[t].push(e):this._listeners[t]=[e]}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0};var r=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,o));return i._config=t,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,PIXI.loaders.Loader),o(e,[{key:"startLoading",value:function(t){for(var n=this,o=0;o<this._config.length;o++)i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,this._config[o].name,this._config[o].path,{crossOrigin:!0});i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"load",this).call(this,function(t,e){var o={};for(var i in e)o[i]=new PIXI.Texture(new PIXI.BaseTexture(e[i].data));n._resolver(o)}),this._resolver=t}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(13));var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._respack=null,this._modules={}}return o(t,[{key:"_startResourcesLoading",value:function(t){this.loader=new i.default(this.config.images),this.loader.startLoading(t)}},{key:"_startLogic",value:function(){console.info("["+game.config.name+"]: Logic started");var t=!0,e=!1,n=void 0;try{for(var o,i=game.MODULES[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value;this._modules[r.name]=new r(this._respack,this.stage),console.info("Module "+r.name+" was attached")}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"run",value:function(){var t=this;this.initRenderer("container",game.config.width,game.config.height),new Promise(function(e){t._startResourcesLoading(e)}).then(function(e){t._respack=e,t._startLogic()})}},{key:"initRenderer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"container",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:640,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:640;PIXI.utils.skipHello();var o=PIXI.autoDetectRenderer({width:e,height:n,transparent:!0,antialias:!0},!1),i=new PIXI.Container,r=new PIXI.ticker.Ticker;document.getElementById(t).appendChild(o.view),r.add(function(){o.render(i)}),r.start(),this.stage=i,this.ticker=game._ticker=r,PIXI.customTicker=r}}]),t}();e.default=r},function(t){t.exports={name:"Tetris",width:1920,height:1080}},function(t){t.exports={images:[{name:"block_blue",path:"resources/block_blue.jpg"},{name:"block_cyan",path:"resources/block_cyan.jpg"},{name:"block_green",path:"resources/block_green.jpg"},{name:"block_orange",path:"resources/block_orange.jpg"},{name:"block_pink",path:"resources/block_pink.jpg"},{name:"block_yellow",path:"resources/block_yellow.jpg"},{name:"block_violet",path:"resources/block_violet.jpg"},{name:"end_button",path:"resources/BTN.png"},{name:"field_back",path:"resources/field_back.png"}]}},function(t,e,n){"use strict";var o=c(n(16)),i=c(n(15)),r=c(n(14)),a=c(n(12)),s=c(n(11)),l=c(n(10));function c(t){return t&&t.__esModule?t:{default:t}}var u={config:i.default,EventManager:new a.default,UserActionListener:new s.default};u.MODULES=[l.default],window.game=u,new r.default(o.default).run()}]);
//# sourceMappingURL=tetris.bundle.js.map